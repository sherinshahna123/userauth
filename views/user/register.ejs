<%- include('layout')-%>
<!-- <div id="particles-js" class="snow"></div> -->

<main>
  <div class="left-side"></div>

  <div class="right-side">
    <% if (error_msg && error_msg.length > 0) { %>
      <div class="flash-message error-message">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-circle">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="8" x2="12" y2="12"></line>
          <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
        <span><%= error_msg %></span>
      </div>
    <% } %>

    <% if (success_msg && success_msg.length > 0) { %>
      <div class="flash-message success-message">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-circle">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
        <span><%= success_msg %></span>
      </div>
    <% } %>

    <form
      method="post"
      action="/register"
      onsubmit="return formValidate()"
    >
      <div class="btn-group">
        <button class="btn">
          <img
            class="logo"
            src="https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/d1c98974-c62d-4071-8bd2-ab859fc5f4e9"
            alt=""
          />
          <span>Sign in with Google</span>
        </button>
        <button class="btn">
          <img
            class="logo"
            src="https://github.com/ecemgo/mini-samples-great-tricks/assets/13468728/59c1561b-8152-4d05-b617-0680a7629a0e"
            alt=""
          />
          <span>Sign in with Apple</span>
        </button>
      </div>

      <div class="or">OR</div>

      <label for="email">Email</label>
      <input
        id="email"
        type="text"
        placeholder="Enter Email"
        name="email"
      />

      <label for="password">Password</label>
      <input
        id="password"
        type="password"
        placeholder="Enter Password"
        name="password"
      />
      <label for="password">Confirm Password</label>
      <input
        id="confirmPassword"
        type="password"
        placeholder="Enter Password"
        name="confirmPassword"
      />

      <button type="submit" class="login-btn">Sign in</button>
      <div class="links">
        <a href="#">Forgot password?</a>
        <a href="/login">Already have an account?</a>
      </div>
    </form>
  </div>
</main>

<style>
  .flash-message {
    display: flex;
    align-items: center;
    padding: 12px 16px;
    margin-bottom: 20px;
    border-radius: 8px;
    font-weight: 500;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    animation: fadeIn 0.3s ease-in-out;
  }

  .flash-message svg {
    width: 24px;
    height: 24px;
    margin-right: 12px;
    flex-shrink: 0;
  }

  .error-message {
    background-color: #ffebee;
    color: #d32f2f;
    border-left: 4px solid #d32f2f;
  }

  .success-message {
    background-color: #e8f5e9;
    color: #2e7d32;
    border-left: 4px solid #2e7d32;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    document.querySelector("form").addEventListener("submit", formValidate);
  });

  function formValidate(e) {
    e.preventDefault(); /*Prevent the form from submitting*/

    var email = document.getElementById("email").value;
    var password = document.getElementById("password").value;
    var confirmPassword = document.getElementById("confirmPassword").value;

    if (email === "" || password === "" || confirmPassword === "") {
      swal.fire("All fields are required","","error");
      return false;
    } else if (password != confirmPassword) {
      swal.fire("Passwords do not match","","error");
      return false;
    }
    // If validation passes, submit the form manually
    e.target.submit();
    return true;
  }
</script>

<%- include('footer')-%>